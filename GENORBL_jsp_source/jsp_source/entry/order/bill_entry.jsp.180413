<%-- 
    Document   : bill_entry
    Created on : Dec 26, 2012, 2:48:58 PM
    Author     : debasis saha
--%>

<%@page import="java.math.BigDecimal"%>
<%@page import="Order.OrderProcessBeanRemote"%>
<%@page import="javax.naming.InitialContext"%>
<%@page import="java.util.List"%>
<%@page import="java.util.Iterator"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<%!    OrderProcessBeanRemote hRemote = null;
    //htmaNewRemote hRemote1 = null ;
    InitialContext ic = null;

    public void jspInit() {
        try {
            ic = new InitialContext();
            hRemote = (OrderProcessBeanRemote) ic.lookup("Order.OrderProcessBeanRemote");
            //hRemote = (OrderProcessBeanRemote) ic.lookup("ejb/OrderProcessBean");
            //hRemote1 = (htmaNewRemote)ic.lookup(htmaNewRemote.class.getName());
        } catch (Exception e) {
            System.out.println("bill_entry.jsp can't be initialsed for " + e.getMessage());
        }
    }
%>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
        <script type="text/javascript" src="js/sel_date.js"></script>
        <script type="text/javascript" src="js/sel_month.js"></script>
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/animatedcollapse.js"></script>
        <script type="text/javascript" src="js/ordGenScript.js"></script>
        <script type="text/javascript" src="js/ordBlScrnScript.js"></script>
        <script>

            function preScript(){
                if(f1.sOrdGenStnCd.value == '016' || f1.sOrdGenStnCd.value == '014' || f1.sOrdGenStnCd.value == '002'){
                    animatedcollapse.show('divIso_1');
                }

                if(f1.hUrgntPmnt.value == 'Y'){
                    f1.sUrgntPmnt.checked = 1;
                    animatedcollapse.show("divUrgntPmntPrntOut");

                }else{
                    f1.sUrgntPmnt.checked = 0;
                    animatedcollapse.hide("divUrgntPmntPrntOut");

                }
                if(f1.hUrgntPmntInvAttach.value == 'Y'){
                    f1.sUrgntPmntInvAttach.checked = 1;
                }else if(f1.hUrgntPmntInvAttach.value == 'N'){
                    f1.sUrgntPmntInvAttach.checked = 0;
                }

                if(f1.sOrdGenStnCd.value == '002' || f1.sOrdGenStnCd.value == '014' || f1.sOrdGenStnCd.value == '016'){
                    if(f1.sOrdTyp.value == 'T' || f1.sOrdTyp.value == 'R'
                        ||
                        f1.sJobComp.value == 'N' && (f1.sOrdTyp.value == 'O' || f1.sOrdTyp.value == 'L' || f1.sOrdTyp.value == 'C')){

                        animatedcollapse.hide("divIso_2");
                        animatedcollapse.show("divIso_1");
                    }
                }
                if(f1.hCancel.value == 'Y')f2.sCancel.checked = 1;

                butnDisplay();

                f1.sBlRecvdDt.focus();
                f1.sBlRecvdDt.select();

                getDiffPermit();


            }

            var iShow_1=0;
            var iShow_2=0;
            var iShow_3=0;           

            function show(div_no){
            
                if(div_no == 1){
                    if(iShow_1 == 0){
                        iShow_1=1;                       
                        animatedcollapse.show('div_1');
                        document.f1.img_1.src='Pics/Order/minus_1.png';
                        //alert(document.getElementById("span_1").data);
                        //document.getElementById("span_1").firstChild.data="hide";
                    }else{

                        iShow_1=0;
                        animatedcollapse.hide('div_1');
                        document.f1.img_1.src='Pics/Order/plus_1.png';
                        //document.getElementById("span_1").firstChild.data="show";
                    }
                    

                }else if(div_no == 2){
                    
                    if(iShow_2 == 0){
                        iShow_2=1;
                        animatedcollapse.show('div_2');
                        //alert(document.getElementById("span_1").data);
                        //document.getElementById("span_2").firstChild.data="hide";
                    }else{

                        iShow_2=0;
                        animatedcollapse.hide('div_2');
                        //document.getElementById("span_2").firstChild.data="show";
                    }
                }else if(div_no == 3){
                    if(iShow_3 == 0){
                        iShow_3=1;
                        animatedcollapse.show('div_3');
                        //alert(document.getElementById("span_1").data);
                        //document.getElementById("span_2").firstChild.data="hide";
                    }else{

                        iShow_3=0;
                        animatedcollapse.hide('div_3');
                        //document.getElementById("span_2").firstChild.data="show";
                    }
                }
            }


            function clickImg(obj){
                var imgNm = obj.src.substring(obj.src.lastIndexOf('/')+1,obj.src.length);
                //alert(imgNm);
                if(obj.name=='imgBlRmrk' || obj.name=='imgUrgntPmnt' || obj.name=='imgCancel_2' || obj.name=='imgIso_2'){
                    if(imgNm ==  'plus_1.png'){
                        //alert('div'+obj.name.substring(3))
                        animatedcollapse.show('div'+obj.name.substring(3));
                        obj.src =  'Pics/Order/minus_1.png'
                    }else if(imgNm == 'minus_1.png'){
                        animatedcollapse.hide('div'+obj.name.substring(3));
                        obj.src =  'Pics/Order/plus_1.png'
                    }
                }
                return true ;
            }

            function edit(){
                edit_onclick();
            }

            function old() {
                lock_controls(0);
            }

            function blCancel(sUpdRmrk){

                alert(sUpdRmrk);
                if(sUpdRmrk == 'Cancel Sucessful !'){
                    f1.hCancel.value = 'Y';
                    butnDisplay();
                    getDiffPermit();
                }
                return true;
            }

            function setChkBoxVal(obj){
                if(obj.checked == 1)obj.value = 'Y'
                else obj.value = 'N'
             
                return true;
            }

            

        </script>
        <style>
            .buttonActive{
                font-family      : Courier New ;
                font-size        : 12pt        ;
                font-weight      : bold        ;
                color            : #FFFFFF     ;
                background-color : #274F52     ;
                width            : 100px       ;
                border-style     : outset
            }

            .buttonInactive{
                font-family      : Courier New ;
                font-size        : 12pt        ;
                font-weight      : bold        ;
                color            : #FFFFFF     ;
                background-color : #CDCDCD     ;
                width            : 100px       ;
                border-style     : outset
            }
            .table {
                font-family     : verdana;
                font-size       : 14px;
                text-align      : left;
            }

            .table_thead  {
                cursor : pointer;
            }

            .table_thead_tr{
                background : #ffdd00;
            }

            .table_tfoot_tr {
                background : #ffffff;
            }

            .table_thead_tr_th{
                border-left   : 1pt solid red ;
                border-top : 1px solid red ;
                border-bottom : 1px solid red ;
            }

            .table_tfoot_tr_th{
                border-left : 1pt solid red ;
                border-top  : 1px solid red ;
            }

            .table_tbody_tr_td{
                border-left   : 1pt solid green ;
                border-right   : 1pt solid green ;
                border-top : 1pt solid green ;
                border-bottom : 1pt solid green ;
            }

        </style>
    </head>
    <body bgcolor="" background="Pics/Order/lblue047.gif" onload="if(f1.sBlId.value == ''){preScript();old();someFldReadOnly();}else{preScript();lock_controls(1);}" onunlouad="ld()">

        <jsp:useBean id="orderBean" class="VO.OrderBean" scope="session"/>

        <form name="f1" align="center" action="OrderProcessServlet" method="post" onsubmit="">
            <input type="hidden" name="sCallNm" value="insUpdBlDtl">
            <input type="hidden" name="bill_cancel" value="<bill_cancel>">
            <input type="hidden" name="bill_cl" value="<bill_cl>">
            <input type="hidden" name="billref" value="<billref>">
            <input type="hidden" name="cert_by" value="<cert_by>">
            <input type="hidden" name="ordref" value="<ordref>">
            <input type="hidden" name="rowid" value="<rowid>">


            <%
                        String sLoginStnCd = request.getParameter("sLoginStnCd");
                        String sLoginStnShrtNm = request.getParameter("sLoginStnShrtNm");
                        String sLoginStnLongNm = request.getParameter("sLoginStnLongNm");
                        String sLoginDeptCd = request.getParameter("sLoginDeptCd");
                        String sLoginDeptShrtNm = request.getParameter("sLoginDeptShrtNm");
                        String sLoginDeptLongNm = request.getParameter("sLoginDeptLongNm");
                        String sLoginEmpCd = request.getParameter("sLoginEmpCd");
                        String sLoginEmpNm = request.getParameter("sLoginEmpNm");
                        String sLoginEmpDesg = request.getParameter("sLoginEmpDesg");
                        String sLoginEmpLvl = request.getParameter("sLoginEmpLvl");





                        String sOrdId = new String();
                        String sBlId = new String();
                        sOrdId = request.getParameter("sOrdId");

                        if (request.getParameter("sBlId") != null) {
                            sBlId = request.getParameter("sBlId");
                        }

                        //System.out.println("sOrdId : " + sOrdId);
                        //System.out.println("sBlId : " + sBlId);
                        String sOrdGenStnCd = new String();
                        String sOrdForStnCd = new String();
                        String sOrdForStnShrtNm = new String();
                        String sOrdForStnLongNm = new String();
                        String sOrdNo = new String();
                        String sOrdSts = new String();
                        String sOrdDt = new String();
                        String sJobComp = new String();
                        String sOrdTyp = new String();
                        String sRetnPctg = new String();
                        String sMatCost = new String();
                        String sLabChrg = new String();
                        String sGrosAmt = new String();
                        String sErpCd = new String();

                        String sBlNo = new String();
                        String sBlDt = new String();

                        String sOt = new String();
                        String sServTax = new String();
                        String sVat = new String();
                        String sOthAmt = new String();
                        String sBlAmt = new String();

                        String sJobMnth = new String();
                        String sBlRealDt = new String();
                        String sBlRecvdDt = new String();
                        String sBlCertBy = new String();
                        String sBlCertByNm = new String();
                        String sBlRmrk = new String();
                        String sUrgntPmnt = new String();
                        String sUrgntPmntRmrk = new String();
                        String sUrgntPmntInvAttach = new String();
                        String sBlCancel = new String();
                        String sBlCancelBy = new String();
                        String sBlCancelByNm = new String();
                        String sBlCancelDt = new String();
                        String sBlCancelRmrk = new String();

                        String sFinRecvdDt = new String();

                        String sJobQuality = new String();
                        String sTimExec = new String();
                        String sEhsComp = new String();

                        String sSysDt = new String();

                        sBlCertBy = sLoginEmpCd;
                        sBlCertByNm = sLoginEmpNm;
                        //sBlCancelBy = sLoginEmpCd;
                        //sBlCancelByNm = sLoginEmpNm;

                        String sOrdCancel = new String();


                        Iterator iterateOuter = null;
                        Iterator iterateInner = null;
                        List rows = null;
                        List lstSysDt = null;

                        rows = null;
                        iterateOuter = null;
                        iterateInner = null;
                        lstSysDt = hRemote.getSysDt();
                        iterateOuter = lstSysDt.iterator();
                        while (iterateOuter.hasNext()) {
                            rows = (List) iterateOuter.next();
                            iterateInner = rows.iterator();
                            while (iterateInner.hasNext()) {
                                sSysDt = (String) iterateInner.next();
                            }
                        }

                        sBlRealDt = sSysDt;
                        //sBlCancelDt = sSysDt;




                        iterateOuter = null;
                        iterateInner = null;
                        rows = null;
                        List lstOrdDtls = null;
                        List lstBlDtls = null;

                        if (!sOrdId.equals("")) {
                            rows = null;
                            iterateOuter = null;
                            iterateInner = null;
                            lstOrdDtls = hRemote.getOrdDtls(sOrdId, 2);
                            iterateOuter = lstOrdDtls.iterator();
                            while (iterateOuter.hasNext()) {
                                rows = (List) iterateOuter.next();
                                iterateInner = rows.iterator();
                                while (iterateInner.hasNext()) {
                                    sOrdGenStnCd = (String) iterateInner.next();

                                    sOrdForStnCd = (String) iterateInner.next();

                                    List lstStnNm = null;
                                    List rows_2 = null;
                                    Iterator iterateOuter_2 = null;
                                    Iterator iterateInner_2 = null;
                                    lstStnNm = hRemote.getStnNm(sOrdForStnCd);
                                    iterateOuter_2 = lstStnNm.iterator();
                                    while (iterateOuter_2.hasNext()) {
                                        rows = (List) iterateOuter_2.next();

                                        iterateInner_2 = rows.iterator();
                                        while (iterateInner_2.hasNext()) {
                                            iterateInner_2.next();
                                            sOrdForStnLongNm = (String) iterateInner_2.next();

                                        }
                                    }
                                    iterateInner.next();
                                    sOrdNo = ((String) iterateInner.next()).trim();
                                    sOrdSts = ((String) iterateInner.next()).trim();
                                    iterateInner.next();
                                    sOrdDt = ((String) iterateInner.next()).trim();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    sOrdTyp = (String) iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    sErpCd = ((String) iterateInner.next()).trim();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    sJobComp = (String) iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    sRetnPctg = ((String) iterateInner.next()).trim();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    sMatCost = ((String) iterateInner.next()).trim();
                                    sLabChrg = ((String) iterateInner.next()).trim();
                                    sGrosAmt = ((String) iterateInner.next()).trim();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    sOrdCancel=(String)iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();
                                    iterateInner.next();

                                }
                            }
                            if (!sBlId.equals("")) {
                                rows = null;
                                iterateOuter = null;
                                iterateInner = null;
                                lstBlDtls = hRemote.getBlDtls(sOrdId, sBlId);
                                iterateOuter = lstBlDtls.iterator();
                                while (iterateOuter.hasNext()) {
                                    rows = (List) iterateOuter.next();
                                    iterateInner = rows.iterator();
                                    while (iterateInner.hasNext()) {
                                        sOrdForStnCd = (String) iterateInner.next();

                                        iterateInner.next();
                                        sOrdNo = (String) iterateInner.next();
                                        sBlId = (String) iterateInner.next();
                                        sBlCertBy = (String) iterateInner.next();
                                        List lstUsrDtls = null;
                                        List rows_2 = null;
                                        Iterator iterateOuter_2 = null;
                                        Iterator iterateInner_2 = null;
                                        lstUsrDtls = hRemote.getUsrDtls(sBlCertBy);
                                        iterateOuter_2 = lstUsrDtls.iterator();
                                        while (iterateOuter_2.hasNext()) {
                                            rows = (List) iterateOuter_2.next();

                                            iterateInner_2 = rows.iterator();
                                            while (iterateInner_2.hasNext()) {
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();

                                                sBlCertByNm = (String) iterateInner_2.next() + " " + (String) iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                            }
                                        }
                                        sBlRealDt = ((String) iterateInner.next()).trim();


                                        sBlNo = ((String) iterateInner.next()).trim();
                                        sBlDt = ((String) iterateInner.next()).trim();
                                        sBlRecvdDt = ((String) iterateInner.next()).trim();

                                        sMatCost = ((String) iterateInner.next()).trim();
                                        sLabChrg = ((String) iterateInner.next()).trim();
                                        sGrosAmt = ((String) iterateInner.next()).trim();

                                        sServTax = ((String) iterateInner.next()).trim();
                                        sVat = ((String) iterateInner.next()).trim();
                                        sOt = ((String) iterateInner.next()).trim();
                                        sOthAmt = ((String) iterateInner.next()).trim();
                                        sBlAmt = ((String) iterateInner.next()).trim();

                                        sJobMnth = ((String) iterateInner.next()).trim();
                                        sUrgntPmnt = ((String) iterateInner.next()).trim();
                                        sUrgntPmntInvAttach = ((String) iterateInner.next()).trim();
                                        sUrgntPmntRmrk = ((String) iterateInner.next()).trim();
                                        sBlRmrk = ((String) iterateInner.next()).trim();
                                        sJobQuality = ((String) iterateInner.next()).trim();
                                        sTimExec = ((String) iterateInner.next()).trim();
                                        sEhsComp = ((String) iterateInner.next()).trim();
                                        iterateInner.next();
                                        sFinRecvdDt = ((String) iterateInner.next()).trim();
                                        sBlCancel = ((String) iterateInner.next()).trim();
                                        sBlCancelBy = ((String) iterateInner.next()).trim();

                                        rows_2 = null;
                                        iterateOuter_2 = null;
                                        iterateInner_2 = null;
                                        iterateOuter_2 = lstUsrDtls.iterator();
                                        while (iterateOuter_2.hasNext()) {
                                            rows = (List) iterateOuter_2.next();

                                            iterateInner_2 = rows.iterator();
                                            while (iterateInner_2.hasNext()) {
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();

                                                sBlCancelByNm = (String) iterateInner_2.next() + " " + (String) iterateInner_2.next();
                                                iterateInner_2.next();
                                                iterateInner_2.next();
                                            }
                                        }
                                        sBlCancelDt = ((String) iterateInner.next()).trim();
                                        sBlCancelRmrk = ((String) iterateInner.next()).trim();


                                        //sFinRef = ((String) iterateInner.next()).trim();
                                        //sFinDt = ((String) iterateInner.next()).trim();


                                    }
                                }
                            }

                            if (sRetnPctg.equals("")) {
                                sRetnPctg = "NIL";
                            }

                            if (sBlCancelBy.equals("")) {
                                sBlCancelBy = sLoginEmpCd;
                                sBlCancelByNm = sLoginEmpNm;
                                sBlCancelDt = sSysDt;
                            }



                            boolean bBlEditPermit = true;
                            boolean bBlCancelPermit = true;

                            if (!sBlId.equals("") && sBlCancel.equals("N")) {
                                bBlEditPermit = hRemote.getDiffBlPermit("BlEdit", sBlCertBy, sLoginEmpCd);
                            }

                            if (!sBlId.equals("") && sBlCancel.equals("N")) {
                                bBlCancelPermit = hRemote.getDiffBlPermit("BlCancel", sBlCertBy, sLoginEmpCd);
                            }
            %>

            <input type="hidden" name="sLoginStnCd" value="<%= sLoginStnCd%>">
            <input type="hidden" name="sLoginStnShrtNm" value="<%= sLoginStnShrtNm%>">
            <input type="hidden" name="sLoginStnLongNm" value="<%= sLoginStnLongNm%>">
            <input type="hidden" name="sLoginDeptCd" value="<%= sLoginDeptCd%>">
            <input type="hidden" name="sLoginDeptShrtNm" value="<%= sLoginDeptShrtNm%>">
            <input type="hidden" name="sLoginDeptLongNm" value="<%= sLoginDeptLongNm%>">
            <input type="hidden" name="sLoginEmpCd" value="<%= sLoginEmpCd%>">
            <input type="hidden" name="sLoginEmpNm" value="<%= sLoginEmpNm%>">
            <input type="hidden" name="sLoginEmpDesg" value="<%= sLoginEmpDesg%>">
            <input type="hidden" name="sLoginEmpLvl" value="<%= sLoginEmpLvl%>">

            <input type="hidden" name="sOrdGenStnCd" value="<%= sOrdGenStnCd%>">
            <input type="hidden" name="sOrdForStnCd" value="<%= sOrdForStnCd%>">
            <input type="hidden" name="sOrdId" value="<%= sOrdId%>">
            <input type="hidden" name="sOrdNo" value="<%= sOrdNo%>">
            <input type="hidden" name="sOrdSts" value="<%= sOrdSts%>">
            <input type="hidden" name="sOrdDt" value="<%= sOrdDt%>">
            <input type="hidden" name="sOrdTyp" value="<%= sOrdTyp%>">
            <input type="hidden" name="sJobComp" value="<%= sJobComp%>">
            <input type="hidden" name="sBlId" value="<%= sBlId%>">
            <input type="hidden" name="sBlCertBy" value="<%= sBlCertBy%>">
            <input type="hidden" name="sBlRealDt" value="<%= sBlRealDt%>">
            <input type="hidden" name="hUrgntPmnt" value="<%= sUrgntPmnt%>">
            <input type="hidden" name="hUrgntPmntInvAttach" value="<%= sUrgntPmntInvAttach%>">
            <input type="hidden" name="hCancel" value="<%= sBlCancel%>">
            <input type="hidden" name="sSysDt" value="<%= sSysDt%>">
            <input type="hidden" name="bBlEditPermit" value="<%= bBlEditPermit%>">
            <input type="hidden" name="bBlCancelPermit" value="<%= bBlCancelPermit%>">
            <input type="hidden" name="hJobMnth" value="">

            <input type="hidden" name="sOrdCancel" value="<%= sOrdCancel %>"/>
            <input type="hidden" name="bOrdEntryPermit" value=""/>
            <input type="hidden" name="bBlEntryPermit" value=""/>
            <input type="hidden" name="bBlSrchPermit" value=""/>
            <input type="hidden" name="bOrdCopyPermit" value=""/>


            <center>
                <b><font face="Times New Roman" size="5" color="mediumblue">BILL&nbsp;&nbsp;&nbsp;ENTRY&nbsp;&nbsp;&nbsp;SCREEN</font></b>
                <table cellspacing="1" cellpadding="2" class="table" id="" width="80%" style="border-collapse: collapse" border="0">
                    <tbody>
                        <tr class="table_tbody_tr">
                            <td width="15%"><font face="Times New Roman" color="#80080" size="3"><b>Bill&nbsp;for&nbsp;Order&nbsp;No.</b></font></td>
                            <td width="45%" bgcolor="b7dafd">
                                <font face="Tahoma" color="#000000"><b><%= sOrdNo%></b></font>
                            </td>
                            <td width="19%">
                                <font face="Times New Roman" color="#80080" size="3"><b>Retention(%)</b></font>
                            </td>
                            <td width="21%" bgcolor="b7dafd">
                                <font face="Tahoma" color="#000000"><b><%= sRetnPctg%></b></font>
                            </td>
                        </tr>
                        <tr class="table_tbody_tr">
                            <td><font face="Times New Roman" color="#80080" size="3"><b>Bill&nbsp;Certified&nbsp;By</b></font></td>
                            <td bgcolor="b7dafd">
                                <font face="Tahoma" color="#000000"><b><%= sBlCertByNm%></b></font>
                            </td>
                            <td>
                                <font face="Times New Roman" color="#80080" size="3"><b>Bill&nbsp;Released&nbsp;On</b></font>
                            </td>
                            <td bgcolor="b7dafd">
                                <font face="Tahoma" color="#000000"><b><%= sBlRealDt%></b></font>
                            </td>
                        </tr>
                        <tr class="table_tbody_tr">
                            <td><font face="Times New Roman" color="#80080" size="3"><b>Station</b></font></td>
                            <td bgcolor="b7dafd">
                                <font face="Tahoma" color="#000000"><b><%= sOrdForStnLongNm%></b></font>
                            </td>
                            <td>
                                <font face="Times New Roman" color="#80080" size="3"><b>Bill&nbsp;Received&nbsp;On</b></font>
                            </td>
                            <td>
                                <input type="text" name="sBlRecvdDt" size="20" value="<%= sBlRecvdDt%>"
                                       onfocus="this.select();"
                                       onclick="if(!this.readOnly){sel_date_cls('f1.sBlRecvdDt','js/');chkBlRecvdDt()}"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkBlRecvdDt()){
                                           f1.sBlNo.focus();
                                           f1.sBlNo.select();

                                       }"
                                       />
                            </td>
                        </tr>
                        <tr class="table_tbody_tr">
                            <td><font face="Times New Roman" color="#80080" size="3"><b>Bill&nbsp;Number</b></font></td>
                            <td>
                                <input type="text" name="sBlNo" size="20" value="<%= sBlNo%>"
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkBlNo()){
                                       f1.sBlDt.focus();
                                       f1.sBlDt.select();
                                       
                                   }"
                                       />
                            </td>
                            <td>
                                <font face="Times New Roman" color="#80080" size="3"><b>Bill&nbsp;Date</b></font>
                            </td>
                            <td>
                                <input type="text" name="sBlDt" size="20" value="<%= sBlDt%>"
                                       onfocus="this.select();"
                                       onclick="if(!this.readOnly){sel_date_cls('f1.sBlDt','js/');chkBlDt()}"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkBlDt()){
                                           f1.sMatCost.focus();
                                           f1.sMatCost.select();

                                       }"
                                       />
                            </td>
                        </tr>

                        <tr class="table_tbody_tr">
                            <td><font face="Times New Roman" color="#80080" size="3"><b>Material&nbsp;(Rs)</b></font></td>
                            <td>
                                <input type="text" name="sMatCost" size="20" value="<%= sMatCost%>" style="text-align: right"
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkMatCost()){
                                           f1.sLabChrg.focus();
                                           f1.sLabChrg.select();
                                       
                                       }"
                                       />
                            </td>
                            <td>
                                <font face="Times New Roman" color="#80080" size="3"><b>Labour&nbsp;(Rs)</b></font>
                            </td>
                            <td>
                                <input type="text" name="sLabChrg" size="20"  style="text-align: right" value="<%= sLabChrg%>" 
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkLabChrg()){
                                       f1.sGrosAmt.focus();
                                       f1.sGrosAmt.select();
                                       
                                   }"
                                       />
                            </td>
                        </tr>

                        <tr class="table_tbody_tr">
                            <td colspan="3" style="background-color: #FFFFCC"><font face="Times New Roman" color="#80080" size="3" align="center"><b>Gross&nbsp;Bill&nbsp;Amount&nbsp;(Rs)</b></font></td>
                            <td style="background-color: #FFFFCC">
                                <input type="text" name="sGrosAmt" size="20" style="text-align: right" value="<%= sGrosAmt%>"
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkGrosAmt()){
                                   f1.sServTax.focus();
                                   f1.sServTax.select();
                               }"
                                       />
                            </td>
                        </tr>

                        <tr class="table_tbody_tr">
                            <td><font face="Times New Roman" color="#80080" size="3"><b>Service&nbsp;tax&nbsp;(Rs)</b></font></td>
                            <td>
                                <input type="text" name="sServTax" size="20" style="text-align: right" value="<%= sServTax%>"
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkSServTax()){
                               f1.sVat.focus();
                               f1.sVat.select();
                           }"
                                       />
                            </td>
                            <td>
                                <font face="Times New Roman" color="#80080" size="3" style="text-align: right"><b>VAT&nbsp;(Rs)</b></font>
                            </td>
                            <td>
                                <input type="text" name="sVat" size="20" style="text-align: right" value="<%= sVat%>"
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkSVat()){
                           if(f1.sOrdGenStnCd.value == '016'){
                               f1.sOt.focus();
                               f1.sOt.select();
                           }else{
                               f1.sOthAmt.focus();
                               f1.sOthAmt.select();
                           }
                       }"
                                       />
                            </td>
                        </tr>

                        <tr class="table_tbody_tr">
                            <td><font face="Times New Roman" color="#80080" size="3"><b>Overtime&nbsp;(Rs)</b></font></td>
                            <td>
                                <input type="text" name="sOt" size="20" style="text-align: right" value="<%= sOt%>"
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkSOt()){
                       f1.sOthAmt.focus();
                       f1.sOthAmt.select();
                   }"
                                       />
                            </td>
                            <td>
                                <font face="Times New Roman" color="#80080" size="3"><b>Other&nbsp;Amount&nbsp;(Rs)</b></font>
                            </td>
                            <td>
                                <input type="text" name="sOthAmt" size="20" style="text-align: right" value="<%= sOthAmt%>"
                                       onfocus="this.select();"
                                       onkeyup="if(!this.readOnly && window.event.keyCode == 13 && chkSOthAmt()){
                   calcSBlAmt();
                   f1.sJobMnth.focus();
                   f1.sJobMnth.select();
               }"
                                       />
                            </td>
                        </tr>

                        <tr class="table_tbody_tr">
                            <td colspan="3" style="background-color: #FFFFCC"><font face="Times New Roman" color="#80080" size="3" align="center"><b>Net&nbsp;Bill&nbsp;Amount&nbsp;(Rs)</b></font></td>
                            <td style="background-color: #FFFFCC">
                                <input type="text" name="sBlAmt" size="20" style="text-align: right" value="<%= sBlAmt%>"/>
                            </td>
                        </tr>

                        <tr class="table_tbody_tr">
                            <td><font face="Times New Roman" color="#80080" size="3" align="center"><b>Job&nbsp;Done&nbsp;in&nbsp;Month</b></font></td>
                            <td>                               
                                <input type="text" name="sJobMnth" size="6" value="<%= sJobMnth%>"
                                       onfocus="this.select();"
                                       onclick="if(!this.readOnly){sel_month('f1.sJobMnth','js/');chkJobMnth();}"
                                       />
                            </td>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>

                        <tr class="table_tbody_tr">
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <img name="imgUrgntPmnt" src="Pics/Order/plus_1.png" style="width : 20px ; height : 20px ; cursor : pointer" onclick = "clickImg(this);"/>
                                        </td>
                                        <td>
                                            &nbsp;<font face="Times New Roman" color="#80080" size="3"><b>Urgent&nbsp;Payment</b></font>
                                        </td>
                                    </tr>
                                </table>
                            </td>

                            <td colspan="3" align="left">

                                <div id="divUrgntPmnt" style="width: 550px; background: #FFFFCC; display:none">
                                    <font face="Times New Roman" color="#0080FF" size="3"><b>Do you need this bill to be paid on Urgent basis ?</b></font>&nbsp;&nbsp;<input type="checkbox" name="sUrgntPmnt" /><br><br>
                                    <font face="Times New Roman" color="#0080FF" size="3"><b>Will the Invoice be attached with the Urgent Payment Request Form</b></font>&nbsp;&nbsp;<input type="checkbox" name="sUrgntPmntInvAttach" /><br><br>
                                    <font face="Times New Roman" color="#0080FF" size="3"><b><i>Reason&nbsp;for&nbsp;Urgent&nbsp;Payment</i>:</b></font><br>
                                    <textarea rows="5" name="sUrgntPmntRmrk" cols="66" onfocus="this.select();"><%=sUrgntPmntRmrk%></textarea>
                                    <div id="divUrgntPmntPrntOut" style="display : none">
                                        <a href="spbill_urgnt_pymnt_form.jsp?spbil_ref_h=<%= sBlId%>&billtype_h=N" target="_blank">Click to print Urgent Payment Form</a>
                                    </div>

                                </div>


                            </td>

                        </tr>

                        <tr>

                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <img name="imgBlRmrk" src="Pics/Order/plus_1.png" style="width : 20px ; height : 20px ; cursor : pointer" onclick = "clickImg(this);"/>
                                        </td>
                                        <td>
                                            &nbsp;<font face="Times New Roman" color="#80080" size="3"><b>Remarks</b></font>
                                        </td>
                                    </tr>
                                </table>
                            </td>


                            <td colspan="3">
                                <div id="divBlRmrk" style="width: 550px; background: #FFFFCC; display:none">
                                    <textarea rows="5" name="sBlRmrk" cols="66" onfocus="this.select();"><%=sBlRmrk%></textarea>
                                </div>
                            </td>
                        </tr>




                        <tr class="table_tbody_tr">
                            <td>
                                <div id="divIso_1" style="width: 120px; background: #FFFFCC; display:none">
                                    <table>
                                        <tr>
                                            <td>
                                                <img name="imgIso_2" src="Pics/Order/plus_1.png" style="width : 20px ; height : 20px ; cursor : pointer" onclick = "clickImg(this);"/>
                                            </td>
                                            <td>
                                                &nbsp;<font face="Times New Roman" color="#80080" size="3"><b>ISO&nbsp;Block</b></font>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </td>

                            <td colspan="3" align="left">

                                <div id="divIso_2" style="width: 630px; background: #FFFFCC; display:none">
                                    <table>
                                        <tr>
                                            <td><font face="Times New Roman" color="#80080" size="3"><b>Job&nbsp;Quality</b></font>
                                            </td>
                                            <td><input name="sJobQuality" size="11" value="<%= sJobQuality%>" onfocus="this.select();"/></td>
                                            <td><font face="Times New Roman" color="#80080" size="3"><b>Timely&nbsp;Execution</b></font>
                                            </td>
                                            <td><input name="sTimExec" size="11" value="<%= sTimExec%>" onfocus="this.select();"/></td>
                                            <td><font face="Times New Roman" color="#80080" size="3"><b>EHS&nbsp;Compliance</b></font>
                                            </td>
                                            <td><input name="sEhsComp" size="11" value="<%= sEhsComp%>" onfocus="this.select();"/></td>
                                        </tr>
                                    </table>
                                </div>

                            </td>

                        </tr>
                </table>
            </center>
        </form>
        <form name="f2" align="center" action="OrderProcessServlet" method="post" target="iFrameBlCancel">
            <input type="hidden" name="sCallNm" value="BlCancel"/>
            <input type="hidden" name="sOrdId" value="<%= sOrdId%>"/>
            <input type="hidden" name="sBlId" value="<%= sBlId%>"/>
            <input type="hidden" name="sBlCancel" value="Y"/>
            <input type="hidden" name="sBlCancelBy" value="<%= sBlCancelBy%>"/>
            <input type="hidden" name="sBlCancelDt" value="<%= sBlCancelDt%>"/>

            <center>
                <table cellspacing="1" cellpadding="2" class="table" id="" width="80%" style="border-collapse: collapse" border="0">

                    <tr class="table_tbody_tr">
                        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <div id="divCancel_1" style="width: 110px; background: #FFFFCC; display:none">
                                <table>
                                    <tr>
                                        <td>
                                            <img name="imgCancel_2" src="Pics/Order/plus_1.png" style="width : 20px ; height : 20px ; cursor : pointer" onclick = "clickImg(this);"/>
                                        </td>
                                        <td>
                                            &nbsp;<font face="Times New Roman" color="#80080" size="3"><b>Bill&nbsp;Cancel</b></font>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </td>

                        <td align="left">

                            <div id="divCancel_2" style="width: 550px; background: #FFFFCC; display:none">
                                <table>
                                    <tr>
                                        <td><font face="Times New Roman" color="#80080" size="3"><b>Cancel&nbsp;this&nbsp;Bill&nbsp(&nbsp;<%= sBlNo%>&nbsp;)</b></font>
                                        </td>
                                        <td><input type="checkbox" name="sCancel" /></td>
                                    </tr>
                                    <tr>
                                        <td><font face="Times New Roman" color="#80080" size="3"><b>Canceled&nbsp;By</b></font>
                                        </td>
                                        <td bgcolor="b7dafd">
                                            <font face="Tahoma" color="#000000"><b><%= sBlCancelByNm%></b></font>

                                        </td>
                                    </tr>
                                    <tr>
                                        <td><font face="Times New Roman" color="#80080" size="3"><b>Canceled&nbsp;On</b></font>
                                        </td>
                                        <td bgcolor="b7dafd">
                                            <font face="Tahoma" color="#000000"><b><%= sBlCancelDt%></b></font>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td><font face="Times New Roman" color="#80080" size="3"><b>Reason&nbsp;for&nbsp;Cancellation</b></font>
                                        </td>
                                        <td colspan="3">
                                            <textarea rows="5" name="sBlCancelRmrk" cols="40" onfocus="this.select();"><%=sBlCancelRmrk%></textarea>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                        </td>

                    </tr>





                    <tr>
                        <td colspan="2" align="center">
                            <table>
                                <td><font face="Times New Roman" color="#0080FF" size="3"><b>Bill&nbsp;Code</b></font></td>
                                <td>&nbsp;</td>
                                <td bgcolor="ghostwhite" align="right">
                                    BBGS/BILL/<%= sBlId%>
                                </td>
                            </table>
                        </td>
                    </tr>

                    <%
                                                if (!sErpCd.equals("")) {
                    %>

                    <tr>
                        <td colspan="2" align="center">
                            <table>
                                <tr>

                                    <td align="left"><font face="Times New Roman" color="#0080FF" size="3"><b><b>ERP A/c No</b></font></b></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(0, 1)%> </font></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(1, 2)%></font></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(2, 3)%></font></td>
                                    <td bgcolor="#008000"><font face="Verdana" size="6"><%=sErpCd.substring(3, 4)%></font></td>
                                    <td bgcolor="#008000"><font face="Verdana" size="6"><%=sErpCd.substring(4, 5)%></font></td>
                                    <td bgcolor="#008000"><font face="Verdana" size="6"><%=sErpCd.substring(5, 6)%></font></td>
                                    <td bgcolor="#008000"><font face="Verdana" size="6"><%=sErpCd.substring(6, 7)%></font></td>
                                    <td bgcolor="#008000"><font face="Verdana" size="6"><%=sErpCd.substring(7, 8)%></font></td>
                                    <td bgcolor="#8000FF"><font face="Verdana" size="6"><%=sErpCd.substring(8, 9)%></font></td>
                                    <td bgcolor="#8000FF"><font face="Verdana" size="6"><%=sErpCd.substring(9, 10)%></font></td>
                                    <td bgcolor="#8000FF"><font face="Verdana" size="6"><%=sErpCd.substring(10, 11)%></font></td>
                                    <td bgcolor="#0080FF"><font face="Verdana" size="6"><%=sErpCd.substring(11, 12)%></font></td>
                                    <td bgcolor="#0080FF"><font face="Verdana" size="6"><%=sErpCd.substring(12, 13)%></font></td>
                                    <td bgcolor="#0080FF"><font face="Verdana" size="6"><%=sErpCd.substring(13, 14)%></font></td>
                                    <td bgcolor="#0080FF"><font face="Verdana" size="6"><%=sErpCd.substring(14, 15)%></font></td>
                                    <td bgcolor="#0080FF"><font face="Verdana" size="6"><%=sErpCd.substring(15, 16)%></font></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(16, 17)%></font></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(17, 18)%></font></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(18, 19)%></font></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(19, 20)%></font></td>
                                    <td bgcolor="#FF8000"><font face="Verdana" size="6"><%=sErpCd.substring(20, 21)%></font></td>

                                </tr>

                            </table>
                        </td>
                    </tr>

                    <%                                                    }
                    %>

                    <tr>
                        <td colspan="2">
                            &nbsp;
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2" align="middle" >
                            <div id="divButn" style="width: 800px; background: #000040; display:none">
                                <table>
                                    <tr>
                                        <td>
                                            <div id="divButnEdit" style="width: 100px; background: #000040; display:none">
                                                <input type="button" value="Edit" name="edit_btn" onclick="edit();">
                                            </div>
                                        </td>
                                        <td>
                                            <div id="divButnCancel" style="width: 120px; background: #000040; display:none">
                                                <input type="button" value="Cancel the Bill" name="butnCancel" onclick="if(f2.sCancel.checked==1 && chkCancel()){f2.submit();}">
                                            </div>
                                        </td>

                                    </tr>
                                </table>
                            </div>
                        </td>
                    </tr>

                    </tbody>
                </table>
            </center>
        </form>

        <div style="display:none">
            <iframe id ="iFrameBlCancel" name ="iFrameBlCancel" src="" height="0px" width="0px">

            </iframe>
        </div>


        <%
                    }
        %>
        <script>

animatedcollapse.addDiv('div_1', 'optional_attribute_string');
animatedcollapse.addDiv('div_2', 'optional_attribute_string');
animatedcollapse.addDiv('div_3', 'optional_attribute_string');

animatedcollapse.addDiv('divBlRmrk', 'optional_attribute_string');
animatedcollapse.addDiv('divUrgntPmnt', 'optional_attribute_string');
animatedcollapse.addDiv('divCancel_1', 'optional_attribute_string');
animatedcollapse.addDiv('divCancel_2', 'optional_attribute_string');
animatedcollapse.addDiv('divIso_1', 'optional_attribute_string');
animatedcollapse.addDiv('divIso_2', 'optional_attribute_string');
animatedcollapse.addDiv('divUrgntPmntPrntOut', 'optional_attribute_string');
animatedcollapse.addDiv('divButn', 'optional_attribute_string');
animatedcollapse.addDiv('divButnEdit', 'optional_attribute_string');
animatedcollapse.addDiv('divButnCancel', 'optional_attribute_string');
animatedcollapse.init();



        </script>



    </body>
</html>
